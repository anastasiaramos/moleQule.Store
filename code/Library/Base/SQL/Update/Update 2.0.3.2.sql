/* UPDATE 2.0.3.2*/

SET SEARCH_PATH = "COMMON";

ALTER TABLE "Proveedor" ADD COLUMN "OID_CUENTA_BANCARIA_ASOCIADA" int8 DEFAULT 0;

UPDATE "Proveedor" SET "OID_CUENTA_BANCARIA_ASOCIADA" = CB."OID"
FROM "CUENTA_BANCARIA" AS CB 
WHERE "Proveedor"."CUENTA_ASOCIADA" = CB."VALOR";

ALTER TABLE "Proveedor" DROP COLUMN "CUENTA_ASOCIADA";

ALTER TABLE "Despachante" ADD COLUMN "OID_CUENTA_BANCARIA_ASOCIADA" int8 DEFAULT 0;

UPDATE "Despachante" SET "OID_CUENTA_BANCARIA_ASOCIADA" = CB."OID"
FROM "CUENTA_BANCARIA" AS CB 
WHERE "Despachante"."CUENTA_ASOCIADA" = CB."VALOR";

ALTER TABLE "Despachante" DROP COLUMN "CUENTA_ASOCIADA";

ALTER TABLE "Naviera" ADD COLUMN "OID_CUENTA_BANCARIA_ASOCIADA" int8 DEFAULT 0;

UPDATE "Naviera" SET "OID_CUENTA_BANCARIA_ASOCIADA" = CB."OID"
FROM "CUENTA_BANCARIA" AS CB 
WHERE "Naviera"."CUENTA_ASOCIADA" = CB."VALOR";

ALTER TABLE "Naviera" DROP COLUMN "CUENTA_ASOCIADA";

ALTER TABLE "Transportista" ADD COLUMN "OID_CUENTA_BANCARIA_ASOCIADA" int8 DEFAULT 0;

UPDATE "Transportista" SET "OID_CUENTA_BANCARIA_ASOCIADA" = CB."OID"
FROM "CUENTA_BANCARIA" AS CB 
WHERE "Transportista"."CUENTA_ASOCIADA" = CB."VALOR";

ALTER TABLE "Transportista" DROP COLUMN "CUENTA_ASOCIADA";

SET SEARCH_PATH = "0001";

ALTER TABLE "Pago" ADD COLUMN "OID_CUENTA_BANCARIA" int8 DEFAULT 0;
ALTER TABLE "Pago" DROP COLUMN "NUMERO";
ALTER TABLE "Pago" DROP COLUMN "SUCURSAL";

UPDATE "Pago" SET "OID_CUENTA_BANCARIA" = CB."OID"
FROM "COMMON"."CUENTA_BANCARIA" AS CB 
WHERE "Pago"."CUENTA" = CB."VALOR";

ALTER TABLE "Pago" DROP COLUMN "CUENTA";


